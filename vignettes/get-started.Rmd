---
title: "Get started"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Get started}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(strongTies)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/mbm_function.Rmd: do not edit by hand -->

<!-- 
Run this 'development' chunk

Store every call to library() that you need to run chunks line by line, as in a classical Rmd for analysis
-->

<!--
# Description of your package

This will fill the description of your package.
Fill and run the content of this chunk, before anything else. 

Note: when you will use other flat templates, this part will be in a separate file. Do not be surprised!
--> 

# Add one to any value

This is the first tool of our wonderful package. 
You can add `1` to any `value` using function `add_one()`.

<!-- 
This first section shows:

- the three parts necessary for a package: 'function', 'examples' and 'tests'.  
+ Note that the three following chunks have names accordingly.

-->

<!--
Here is an example on how to use the function.
This should be a reproducible and working example
-->
```{r examples-create_stan_model}
## Build models.
#choose some weights to test the model on:
weights <- c(2,1,0,4,2,2,2,1,1,3,8) #can be anything, just need the variable names

#add arbitrary labels (this is used just to build the model)
weight_labels <- as.factor(rep(c(0,1),length(weights))) 

#build and compile all base models (this saves time when running the models!)
normal_model_base <-create_stan_model('weights ~ 1', data.frame(weights=weights),"normal")
skewnormal_model_base <- create_stan_model('weights ~ 1', data.frame(weights=weights), "skew_normal")
poisson_model_base <- suppressMessages(create_stan_model('weights ~ 1', data.frame(weights=weights), "poisson"))
poisson_model_label <- suppressMessages(create_stan_model('weights ~ 1 + label', data.frame(weights=weights, label=weight_labels), "poisson"))

```


<!--
Here are some unit tests to verify the function works as expected.
-->



<!--
Here is an example on how to use the function.
This should be a reproducible and working example
-->
```{r examples-fit_stan_model}
## Build models.
#choose some weights to test the model on:
weights <- c(2,1,0,4,2,2,2,1,1,3,8) #can be anything, just need the variable names

#add arbitrary labels (this is used just to build the model)
weight_labels <- as.factor(rep(c(0,1),length(weights))) 

#build and compile all base models (this saves time when running the models!)
normal_model_base <-create_stan_model('weights ~ 1', data.frame(weights=weights),"normal")

model.output<-fit_stan_model(normal_model_base,'weights ~ 1', data.frame(weights=weights), family="normal")
```


<!--
Here are some unit tests to verify the function works as expected.
-->



<!--
Here is an example on how to use the function.
This should be a reproducible and working example
-->
```{r examples-model_based_extraction}
devtools::load_all("/Users/chloevillette/Desktop/strongTies")

library(dplyr)
library(brms)
library(rstan)

# Create a data set
simulated.df<-netTS::sim.events.data(50, 100,20)
simulated.data<-simulated.df$beha
simulated.data<-simulated.data[,c(1:2)]

# Isolate a certain individual (#12).
subset.id <- simulated.data %>% dplyr::filter (from =="12")

# Create an edgelist
edgelist.id <- netTS::create.an.edgeList(subset.id)

# Run the function 
if(nrow(edgelist.id)>10){
  
  strong.ties <-model_based_extraction(edgelist.id$weight, sd_diff = 0, min_diff=3, model_backend="rstan")
  
}else{
  
  strong.ties <- model_based_extraction(edgelist.id$weight, sd_diff = 0, min_diff=1, model_backend="rstan")
}

# Re-attribute partners to the corresponding weights
edgelist.id <- edgelist.id[order(edgelist.id$weight),] 
strong.ties <-cbind(strong.ties,edgelist.id[,c("from", "to")])
```


<!--
Here are some unit tests to verify the function works as expected.
-->


That's it ! This the end of the documented story of our package. All components are there.

<!-- 
# Inflate your package

You're one inflate from paper to box.
Build your package from this very Rmd using `fusen::inflate()` 
-->

<!-- 
- Verify your `"DESCRIPTION"` file has been updated
- Verify your function is in `"R/"` directory
- Verify your test is in `"tests/testthat/"` directory
- Verify this Rmd appears in `"vignettes/"` directory 
-->
